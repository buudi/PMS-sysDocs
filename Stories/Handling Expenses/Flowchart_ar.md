  
## مخطط سير سيناريو "تسجيل وتصديق المصروفات"

**البداية:** يسجل المشرف مصروفًا.

- **العملية 1: مصروف صالح:**
	- يقوم النظام بتحقق من معلومات المصروف.
	- **(القرار 2: المرفق):**
		- **لا يوجد مرفق:**
			- يقدم المشرف طلبًا للتصديق.
			- يراجع المدير الطلب ويوافق عليه او يرفضه.
			- **(القرار 3: الموافقة):**
				- **موافق:** يتم تصفية حساب المشرف.
				- **مرفوض:** يقدم المدير سبب رفضه، يعيد المشرف إرسال الطلب بالتصحيحات.
		- **تحميل المرفق (صورة, ملف):**
			- يقوم النظام بالتحقق من نوع وحجم المرفق.
			- **(القرار 4: المرفق الصالح):**
				- **صالح:** يقدم المشرف الطلب مع المرفق.
				- **غير صالح:** يُخطر المشرف بالمشكلة ويُطلب منه تحميل مرفق صالح.
- **العملية 2: تفاصيل غير كاملة:**
	- يطلب النظام من المشرف تقديم المعلومات المفقودة.
	- يكمل المشرف التفاصيل ويعود إلى العملية 1.

**النهاية:** يتم تصفية حساب المشرف أو يبقى معلّقًا بناءً على موافقة المدير.


```mermaid
graph TD
    A[بداية] -->|تسجيل المصروف| B[القرار 1: تفاصيل المصروف]
    B -->|تفاصيل كاملة| C{العملية 1: مصروف صالح؟}
    C -->|نعم| D[القرار 2: المرفق]
    D -->|لا مرفق| E[يقدم المشرف طلبًا للتصديق]
    E --> F[يقوم المدير بمراجعة الطلب ويوافق/يُرفض]
    F -->|الموافق| G[يتم تصفية حساب المشرف]
    F -->|مرفوض| H[يقدم المدير سبب رفضه، يعيد المشرف إرسال الطلب بالتصحيحات]
    D -->|يوجد مرفق| I[يقوم النظام بالتحقق من نوع وحجم المرفق]
    I --> J[القرار 4: المرفق الصالح]
    J -->|صالح| K[يقدم المشرف الطلب مع المرفق]
    J -->|غير صالح| L[يُخطر المشرف بالمشكلة ويُطلب منه تحميل مرفق صالح]
    C -->|تفاصيل غير كاملة| M[العملية 2: تفاصيل غير كاملة]
    M --> B
    B -->|تفاصيل غير كاملة| N[العملية 2: تفاصيل غير كاملة]
    N --> B
    H --> B
    K --> F
    L --> I
    G -->|نهاية| O[نهاية]
    O -->|تم تصفية الحساب| P
    O -->|معلّق بانتظار موافقة المدير| Q
```


